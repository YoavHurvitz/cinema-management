{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\Final Project Full Stack\\\\client\\\\src\\\\pages\\\\Movie.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Container, Typography, Button, Box, List, ListItem, ListItemText, Divider } from '@mui/material';\nimport { fetchMovies, updateMovie, deleteMovie } from '../redux/moviesSlice';\nimport EditMovie from '../components/EditMovie';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Movie() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const movie = useSelector(state => state.movies.find(m => m._id === id));\n  const subscriptions = useSelector(state => state.subscriptions);\n  const members = useSelector(state => state.members);\n  const [isEditing, setIsEditing] = useState(false);\n  useEffect(() => {\n    if (!movie) {\n      dispatch(fetchMovies());\n    }\n  }, [dispatch, movie]);\n  if (!movie) return /*#__PURE__*/_jsxDEV(Typography, {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 22\n  }, this);\n  const handleEdit = () => setIsEditing(true);\n  const handleUpdate = async updatedMovie => {\n    try {\n      await dispatch(updateMovie(updatedMovie));\n      setIsEditing(false);\n    } catch (error) {\n      console.error('Error updating movie:', error);\n    }\n  };\n  const handleDelete = async () => {\n    try {\n      await dispatch(deleteMovie(movie._id));\n      navigate('/movies');\n    } catch (error) {\n      console.error('Error deleting movie:', error);\n    }\n  };\n  const getMovieSubscriptions = () => {\n    return subscriptions.filter(sub => sub.movieId === movie._id).map(sub => {\n      const member = members.find(m => m._id === sub.memberId);\n      return {\n        ...sub,\n        memberName: member ? member.name : 'Unknown Member'\n      };\n    });\n  };\n  const formatDate = dateString => {\n    const options = {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    };\n    return new Date(dateString).toLocaleDateString(undefined, options);\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    sx: {\n      mt: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: movie.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body1\",\n      children: [\"Year: \", movie.yearPremiered]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body1\",\n      children: [\"Genres: \", movie.genres.join(', ')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: handleEdit,\n        sx: {\n          mr: 1\n        },\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"secondary\",\n        onClick: handleDelete,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        children: \"Subscriptions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(List, {\n        children: getMovieSubscriptions().map((sub, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(ListItem, {\n            children: /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/member/${sub.memberId}`,\n                children: sub.memberName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 28\n              }, this),\n              secondary: `Watched on: ${formatDate(sub.date)}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this), index < getMovieSubscriptions().length - 1 && /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 62\n          }, this)]\n        }, sub._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), isEditing && /*#__PURE__*/_jsxDEV(EditMovie, {\n      movie: movie,\n      open: isEditing,\n      handleClose: () => setIsEditing(false),\n      updateMovie: handleUpdate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(Movie, \"Tl7KMXEQqBvkzQA8UsN+QhAibZg=\", false, function () {\n  return [useParams, useDispatch, useNavigate, useSelector, useSelector, useSelector];\n});\n_c = Movie;\nexport default Movie;\nvar _c;\n$RefreshReg$(_c, \"Movie\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useNavigate","useSelector","useDispatch","Container","Typography","Button","Box","List","ListItem","ListItemText","Divider","fetchMovies","updateMovie","deleteMovie","EditMovie","api","jsxDEV","_jsxDEV","Movie","_s","id","dispatch","navigate","movie","state","movies","find","m","_id","subscriptions","members","isEditing","setIsEditing","children","fileName","_jsxFileName","lineNumber","columnNumber","handleEdit","handleUpdate","updatedMovie","error","console","handleDelete","getMovieSubscriptions","filter","sub","movieId","map","member","memberId","memberName","name","formatDate","dateString","options","year","month","day","Date","toLocaleDateString","undefined","maxWidth","sx","mt","variant","gutterBottom","yearPremiered","genres","join","color","onClick","mr","index","Fragment","primary","to","secondary","date","length","open","handleClose","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/Desktop/Final Project Full Stack/client/src/pages/Movie.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Container, Typography, Button, Box, List, ListItem, ListItemText, Divider } from '@mui/material';\r\nimport { fetchMovies, updateMovie, deleteMovie } from '../redux/moviesSlice';\r\nimport EditMovie from '../components/EditMovie';\r\nimport api from '../services/api';\r\n\r\nfunction Movie() {\r\n  const { id } = useParams();\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const movie = useSelector(state => state.movies.find(m => m._id === id));\r\n  const subscriptions = useSelector(state => state.subscriptions);\r\n  const members = useSelector(state => state.members);\r\n\r\n  const [isEditing, setIsEditing] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!movie) {\r\n      dispatch(fetchMovies());\r\n    }\r\n  }, [dispatch, movie]);\r\n\r\n  if (!movie) return <Typography>Loading...</Typography>;\r\n\r\n  const handleEdit = () => setIsEditing(true);\r\n\r\n  const handleUpdate = async (updatedMovie) => {\r\n    try {\r\n      await dispatch(updateMovie(updatedMovie));\r\n      setIsEditing(false);\r\n    } catch (error) {\r\n      console.error('Error updating movie:', error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await dispatch(deleteMovie(movie._id));\r\n      navigate('/movies');\r\n    } catch (error) {\r\n      console.error('Error deleting movie:', error);\r\n    }\r\n  };\r\n\r\n  const getMovieSubscriptions = () => {\r\n    return subscriptions\r\n      .filter(sub => sub.movieId === movie._id)\r\n      .map(sub => {\r\n        const member = members.find(m => m._id === sub.memberId);\r\n        return { ...sub, memberName: member ? member.name : 'Unknown Member' };\r\n      });\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    const options = { year: 'numeric', month: 'long', day: 'numeric' };\r\n    return new Date(dateString).toLocaleDateString(undefined, options);\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"md\" sx={{ mt: 4 }}>\r\n      <Typography variant=\"h4\" gutterBottom>{movie.name}</Typography>\r\n      <Typography variant=\"body1\">Year: {movie.yearPremiered}</Typography>\r\n      <Typography variant=\"body1\">Genres: {movie.genres.join(', ')}</Typography>\r\n      <Box sx={{ mt: 2 }}>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={handleEdit} sx={{ mr: 1 }}>Edit</Button>\r\n        <Button variant=\"contained\" color=\"secondary\" onClick={handleDelete}>Delete</Button>\r\n      </Box>\r\n      <Box sx={{ mt: 4 }}>\r\n        <Typography variant=\"h5\">Subscriptions</Typography>\r\n        <List>\r\n          {getMovieSubscriptions().map((sub, index) => (\r\n            <React.Fragment key={sub._id}>\r\n              <ListItem>\r\n                <ListItemText \r\n                  primary={<Link to={`/member/${sub.memberId}`}>{sub.memberName}</Link>}\r\n                  secondary={`Watched on: ${formatDate(sub.date)}`}\r\n                />\r\n              </ListItem>\r\n              {index < getMovieSubscriptions().length - 1 && <Divider />}\r\n            </React.Fragment>\r\n          ))}\r\n        </List>\r\n      </Box>\r\n      {isEditing && (\r\n        <EditMovie\r\n          movie={movie}\r\n          open={isEditing}\r\n          handleClose={() => setIsEditing(false)}\r\n          updateMovie={handleUpdate}\r\n        />\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Movie;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}